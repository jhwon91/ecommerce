# API 명세서

## 📌 잔액 조회
- **메소드**: GET
- **엔드포인트**: `/api/users/{userId}/balance`
### **Request**
❌
### **Response**

```json
{
  "code": "200",
  "message:": "null",
  "data": {
    "userId": 1,
    "balance": 20000  
  }
}
```
---
## 📌 잔액 충전
- **메소드**: POST
- **엔드포인트**: `/api/users/{userId}/balance/charge`
### **Request**
Request Body
```json
{
  "amount": 10000
}
```
### **Response**

```json
{
  "code": "200",
  "message:": "null",
  "data": {
    "userId": 1,
    "chargedAmount": 10000,
    "totalBalance": 20000 
  }
}
```
---
## 📌 상품 조회
- **메소드**: GET
- **엔드포인트**: `/api/products`
### **Request**
Query parameter
- sortBy: name, price, stock
- sortOrder: asc, desc
- limit: 조회할 개수

### **Response**
- productId: 상품 ID
- name: 상품 이름
- description : 상품 설명
- price : 상품 각격
- stock : 재고 수량
```json
  {
    "code": "200",
    "message:": "null",
    "data": [
       {
         "productId": 1,
         "name": "상품A",
         "description": "상품A 설명",
         "price": 10,
         "stock": 100
       },
       {
         "productId": 2,
         "name": "상품B",
         "description": "상품B 설명",
         "price": 20,
         "stock": 100
       }  
    ]  
  }
```
### **Error**

---

## 📌 사용자 쿠폰 조회
- **메소드**: GET
- **엔드포인트**: `/api/coupons?userId=123`
---
## 📌 쿠폰 발급
- **메소드**: POST
- **엔드포인트**: `/api/coupons/issue`
---
## 📌 장바구니 상품 추가
- **메소드**: POST
- **엔드포인트**: `/api/cars`
### **Request**
Body parameter
- productId: 상품 ID
- userId: 사용자 ID
- quantity: 수량
```json
  {
    "productId": "1",
    "userId": "1",
    "quantity": 5
  }
```
### **Response**
- cartId: 장바구니 ID
- cartDetailId: 장바구니 세부 ID
- status: 장바구니 상태
- productId: 상품 ID
- name: 상품 이름
- description: 상품 설명
- price: 상품 가격
- totalPrice: 상품 총 가격
- totalQuantity: 상품 총 수량
```json
  {
    "code": "201",
    "message:": "null",
    "data":{
         "cartId": 1,
         "cartDetailId": 1,
         "status": "ACTIVE",
         "productId": 1,
         "name": "상품A",
         "description": "상품A 설명",
         "price": 100,
         "totalPrice": 1000,
         "totalQuantity": 10
     }
  }
```

### **Error**
```json
{
    "code": 404,
    "message": "고객을 찾을 수 없습니다.",
    "data": {
        "errorType": "CUSTOMER_NOT_FOUND",
        "payload": 1
    }
}
```
```json
{
  "code": 404,
  "message": "제품이 존재하지 않습니다.",
  "data": {
    "errorType": "PRODUCT_NOT_FOUND",
    "payload": 1 
  }
}
```
```json
{
  "code": 404,
  "message": "해당 제품은 재고가 없습니다.",
  "data": {
    "errorType": "PRODUCT_OUT_OF_STOCK",
    "payload": 1
  }
}
```

```json
{
  "code": 500,
  "message": "상품 재고가 충분하지 않습니다.",
  "data": {
    "errorType": "INSUFFICIENT_PRODUCT_STOCK",
    "payload": 10
  }
}
```
- - -

## 📌 주문
- **메소드**: POST
- **엔드포인트**: `/api/orders`

### **Request**
Body parameter
- userId: 사용자 ID
```json
  {
    "userId": 1
  }
```

### **Response**
- orderId: 주문 ID
- paymentId: 결제 ID
- amount: 결제 금액
- orderStatus: 주문 상태
- paymentStatus: 결제 상태
- transactionId: 거래 ID
```json
  {
    "code": "201",
    "message:": "null",
    "data":{
         "orderId": 1,
         "paymentId": 1,
         "amount": 10000,
         "orderStatus": "COMPLETE",
         "paymentStatus": "PAID",
         "transactionId": "1asdwer"
     }
  }
```
### **Error**
```json
{
  "code": 404,
  "message": "고객을 찾을 수 없습니다.",
  "data": {
    "errorType": "CUSTOMER_NOT_FOUND",
    "payload": 1
  }
}
```

```json
{
  "code": 404,
  "message": "활성화된 장바구니가 없습니다.",
  "data": {
    "errorType": "ACTIVE_CART_NOT_FOUND",
    "payload": 1
  }
}
```

```json
{
  "code": 404,
  "message": "장바구니에 상품이 없습니다.",
  "data": {
    "errorType": "PRODUCT_IN_CART_NOT_FOUND",
    "payload": "cart"
  }
}
```

```json
{
  "code": 404,
  "message": "제품이 존재하지 않습니다.",
  "data": {
    "errorType": "PRODUCT_NOT_FOUND",
    "payload": 1
  }
}
```

```json
{
  "code": 404,
  "message": "상품 재고가 충분하지 않습니다.",
  "data": {
    "errorType": "INSUFFICIENT_PRODUCT_STOCK",
    "payload": 1
  }
}
```
- - -

## 📌 결제
- **메소드**: POST
- **엔드포인트**: `/api/payments`
### **Request**
Body parameter
- orderId: 주문 ID
```json
  {
    "orderId": 1
  }
```
## 📌 인기 상품 조회
- **메소드**: GET
- **엔드포인트**: `/api/products/popular`

### **Request**
❌

### **Response**
- productId: 상품 ID
- name: 상품 이름
- description : 상품 설명
- price : 상품 각격
- stock : 재고 수량
```json
  {
    "code": "200",
    "message:": "null",
    "data": [
       {
         "productId": 1,
         "name": "상품A",
         "description": "상품A 설명",
         "price": 10,
         "stock": 100
       },
       {
         "productId": 2,
         "name": "상품B",
         "description": "상품B 설명",
         "price": 20,
         "stock": 100
       },
      ...
    ]  
  }
```
### **Error**

---

