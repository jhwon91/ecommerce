# 요구사항 분석

### 📌 잔액 충전
- 사용자 ID, 충전 금액을 입력받아 잔액을 충전할 수 있어야 한다.
- 최소 충전 금액 제한 (예를 들어, 1,000원 미만 충전 불가)
- 결제 금액 충전 내역 있어야 함

### 📌 잔액 조회
- 사용자 ID 입력받아 잔액을 조회할 수 있어야 한다.

### 📌 상품 관리
- 상품 정보(ID, 이름, 가격, 잔여 수량)를 조회할 수 있어야 한다.
- 재고 수량이 정확하게 반영되어야 한다.
- 재고 수량이 부족하면 주문이 불가능함.

### 📌 사용자 쿠폰 조회
- 사용자 ID를 입력받아 보유 쿠폰 목록 반환
- 유효한 쿠폰만 조회 (사용된 쿠폰은 제외)

### 📌 선착순 쿠폰 발급
- 사용자 ID를 입력받아 선착순으로 쿠폰 발급
- 쿠폰이 특정 개수 이상 발급되지 않도록 최대 개수 제한

### 📌 장바구니 추가
- 사용자는 상품의 재고 수량 만큼 장바구니에 할 수 있음.
- 장바구니 추가 시 재고 초과 여부 검증
- 기존에 제품이 있으면 장바구니 추가 수량 만큼 더한다. 
- 최대 주문 가능 수량을 초과하지 않도록 제약 필요(예를 들어, 기존에 3개가 있고, 새로 4개를 추가하려는데, 재고가 5개밖에 없다면 → 최대 2개만 추가 가능해야 함.)

### 📌 주문
- 사용자가 장바구니에 넣었던 상품을 주문함.
- 상품 주문 시 재고 확인 및 차감 필요
- 주문 시 쿠폰 적용으로, 전체 주문 금액에 할인 적용 가능
- 사용자 쿠폰 소유 검증
- 재고 감소 시점 → 주문 시점에서 재고 차감

### 📌 결제
- 충전된 잔액으로만 결제 가능 (잔액 부족 시 결제 실패)
- 주문 후 결제까지 유예 기간 제공 5분 -> 5분 지나면 주문 취소 -> 재고 복구
- 결제 성공시, 결제 실패시, 외부 데이터 플랫폼 응답 없을시 상황 고려
- 결제 성공 시 잔액이 차감됨
- 결제 실패 시 재고 복구

### 📌  인기 상품 추천
- 최근 3일간 가장 많이 팔린 상위 5개 상품 정보 제공
- 판매량 기준 정렬

  


